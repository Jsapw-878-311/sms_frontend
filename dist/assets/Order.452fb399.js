import{r as e,o as t,b as r,J as a,W as o,V as l,F as n,N as i,O as s,d as u,M as d,R as p,L as c,e as m,h as f,w as b,g,i as h,f as y,a3 as S,X as v,j as _,k as w,a8 as k,t as x,E as C,ac as j,ab as P}from"./vendor.236d97b5.js";/* empty css             *//* empty css                   *//* empty css              *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css               */import{_ as N}from"./index.aafdbd46.js";const z={class:"header"},I={key:0},V={key:1},D={key:2},O=g("a",{style:{cursor:"pointer","margin-right":"10px"}},"配货完成",-1),T=g("a",{style:{cursor:"pointer","margin-right":"10px"}},"出库",-1),U=g("a",{style:{cursor:"pointer","margin-right":"10px"}},"关闭订单",-1);var M=N({__name:"Order",setup(N){const M=e({loading:!1,tableData:[],multipleSelection:[],total:0,currentPage:1,pageSize:10,orderNo:"",orderStatus:"",options:[{value:"",label:"全部"},{value:0,label:"待支付"},{value:1,label:"已支付"},{value:2,label:"配货完成"},{value:3,label:"出库成功"},{value:4,label:"交易成功"},{value:-1,label:"手动关闭"},{value:-2,label:"超时关闭"},{value:-3,label:"商家关闭"}]});t((()=>{W()}));const W=()=>{M.loading=!0,r.get("/orders",{params:{pageNumber:M.currentPage,pageSize:M.pageSize,orderNo:M.orderNo,orderStatus:M.orderStatus}}).then((e=>{M.tableData=e.list,M.total=e.totalCount,M.currentPage=e.currPage,M.loading=!1}))},q=()=>{M.currentPage=1,W()},E=e=>{M.multipleSelection=e},F=e=>{M.currentPage=e,W()},J=e=>{let t;if(e)t=[e];else{if(!M.multipleSelection.length)return console.log("state.multipleSelection",M.multipleSelection.length),void C.error("请选择项");t=M.multipleSelection.map((e=>e.orderId))}r.put("/orders/checkDone",{ids:t}).then((()=>{C.success("配货成功"),W()}))},L=e=>{let t;if(e)t=[e];else{if(!M.multipleSelection.length)return void C.error("请选择项");t=M.multipleSelection.map((e=>e.orderId))}r.put("/orders/checkOut",{ids:t}).then((()=>{C.success("出库成功"),W()}))},R=e=>{let t;if(e)t=[e];else{if(!M.multipleSelection.length)return void C.error("请选择项");t=M.multipleSelection.map((e=>e.orderId))}r.put("/orders/close",{ids:t}).then((()=>{C.success("关闭成功"),W()}))};return(e,t)=>{const r=a,C=o,N=l,W=n,X=i,$=s,A=u("router-link"),B=d,G=p,H=c;return m(),f(H,{class:"order-container"},{header:b((()=>[g("div",z,[h(r,{style:{width:"200px","margin-right":"10px"},placeholder:"请输入订单号",modelValue:M.orderNo,"onUpdate:modelValue":t[0]||(t[0]=e=>M.orderNo=e),onChange:q,clearable:""},null,8,["modelValue"]),h(N,{onChange:q,modelValue:M.orderStatus,"onUpdate:modelValue":t[1]||(t[1]=e=>M.orderStatus=e),style:{width:"200px","margin-right":"10px"}},{default:b((()=>[(m(!0),y(v,null,S(M.options,(e=>(m(),f(C,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),_(' <el-button type="primary" size="small" icon="el-icon-edit">修改订单</el-button> '),h(W,{type:"primary",icon:k(j),onClick:t[2]||(t[2]=e=>J())},{default:b((()=>[w("配货完成")])),_:1},8,["icon"]),h(W,{type:"primary",icon:k(j),onClick:t[3]||(t[3]=e=>L())},{default:b((()=>[w("出库")])),_:1},8,["icon"]),h(W,{type:"danger",icon:k(P),onClick:t[4]||(t[4]=e=>R())},{default:b((()=>[w("关闭订单")])),_:1},8,["icon"])])])),default:b((()=>[h(B,{load:M.loading,data:M.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:E},{default:b((()=>[h(X,{type:"selection",width:"55"}),h(X,{prop:"orderNo",label:"订单号"}),h(X,{prop:"totalPrice",label:"订单总价"}),h(X,{prop:"orderStatus",label:"订单状态"},{default:b((t=>[g("span",null,x(e.$filters.orderMap(t.row.orderStatus)),1)])),_:1}),h(X,{prop:"payType",label:"支付方式"},{default:b((e=>[1==e.row.payType?(m(),y("span",I,"微信支付")):2==e.row.payType?(m(),y("span",V,"支付宝支付")):(m(),y("span",D,"未知"))])),_:1}),h(X,{prop:"createTime",label:"创建时间"}),h(X,{label:"操作"},{default:b((e=>[1==e.row.orderStatus?(m(),f($,{key:0,title:"确定配货完成吗？",onConfirm:t=>J(e.row.orderId),"confirm-button-text":"确定","cancel-button-text":"取消"},{reference:b((()=>[O])),_:2},1032,["onConfirm"])):_("v-if",!0),2==e.row.orderStatus?(m(),f($,{key:1,title:"确定出库吗？",onConfirm:t=>L(e.row.orderId),"confirm-button-text":"确定","cancel-button-text":"取消"},{reference:b((()=>[T])),_:2},1032,["onConfirm"])):_("v-if",!0),4==e.row.orderStatus||e.row.orderStatus<0?_("v-if",!0):(m(),f($,{key:2,title:"确定关闭订单吗？",onConfirm:t=>R(e.row.orderId),"confirm-button-text":"确定","cancel-button-text":"取消"},{reference:b((()=>[U])),_:2},1032,["onConfirm"])),h(A,{to:{path:"/order_detail",query:{id:e.row.orderId}}},{default:b((()=>[w("订单详情")])),_:2},1032,["to"])])),_:1})])),_:1},8,["load","data"]),h(G,{background:"",layout:"prev, pager, next",total:M.total,"page-size":M.pageSize,"current-page":M.currentPage,onCurrentChange:F},null,8,["total","page-size","current-page"])])),_:1})}}},[["__file","/Users/jsapw/WebstormProjects/sms_frontend/src/views/Order.vue"]]);export{M as default};
